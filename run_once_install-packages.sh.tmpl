#!/usr/bin/env bash

{{ if eq .chezmoi.os "darwin" -}}
# [Homebrew](https://brew.sh/)
if ! [ -x "$(command -v brew)" ]; then
  curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh
  sudo chgrp -R admin $(brew --prefix)
  sudo chmod -R g+rwX $(brew --prefix)
fi

## Taps
brew tap homebrew/cask-fonts

## Formulae / Casks
brew install \
  antibody \
  chezmoi \
  coreutils \
  curl \
  font-caskaydia-cove-nerd-font \
  fzf \
  git \
  neovim \
  spotifyd \
  spotify-tui

## Services
brew services start spotifyd

# [asdf](https://asdf-vm.com/#/)
git clone https://github.com/asdf-vm/asdf.git ~/.asdf --branch v0.8.0

# [Antibody](https://getantibody.github.io/)
antibody bundle < ~/.zsh_plugins.txt > ~/.zsh_plugins.sh

# [Preferences](https://pawelgrzybek.com/change-macos-user-preferences-via-command-line/)
osascript -e 'tell application "System Preferences" to quit'

defaults write 'Apple Global Domain' AppleInterfaceStyle -string Dark
defaults write com.apple.controlcenter 'NSStatusItem Visible UserSwitcher' -boolean true
{{ end -}}
